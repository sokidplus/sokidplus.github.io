<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="1. Interacting with Other AppsOne of Android’s most important features is an app’s ability to send theuser to another app based on an “action” it would like to perform. 1.1 Sending the User to Another">
<meta name="keywords" content="Android">
<meta property="og:type" content="article">
<meta property="og:title" content="Getting Started">
<meta property="og:url" content="http:&#x2F;&#x2F;sokidplus.github.io&#x2F;2016&#x2F;11&#x2F;28&#x2F;CS&#x2F;Android&#x2F;getting-started&#x2F;index.html">
<meta property="og:site_name" content="Sokidplus">
<meta property="og:description" content="1. Interacting with Other AppsOne of Android’s most important features is an app’s ability to send theuser to another app based on an “action” it would like to perform. 1.1 Sending the User to Another">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2017-10-16T13:57:56.000Z">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://sokidplus.github.io/2016/11/28/CS/Android/getting-started/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Getting Started | Sokidplus</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Sokidplus</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives<span class="badge">2</span></a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/sokidplus" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="http://sokidplus.github.io/2016/11/28/CS/Android/getting-started/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yohann Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sokidplus">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Getting Started
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-11-28 17:12:41" itemprop="dateCreated datePublished" datetime="2016-11-28T17:12:41+08:00">2016-11-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-10-16 21:57:56" itemprop="dateModified" datetime="2017-10-16T21:57:56+08:00">2017-10-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="1-Interacting-with-Other-Apps"><a href="#1-Interacting-with-Other-Apps" class="headerlink" title="1. Interacting with Other Apps"></a>1. Interacting with Other Apps</h1><p>One of Android’s most important features is an app’s ability to send the<br>user to another app based on an “action” it would like to perform.</p>
<h2 id="1-1-Sending-the-User-to-Another-App"><a href="#1-1-Sending-the-User-to-Another-App" class="headerlink" title="1.1 Sending the User to Another App"></a>1.1 Sending the User to Another App</h2><h3 id="1-1-1-Build-an-Implicit-Intent"><a href="#1-1-1-Build-an-Implicit-Intent" class="headerlink" title="1.1.1 Build an Implicit Intent"></a>1.1.1 Build an Implicit Intent</h3><ul>
<li><strong>Initiate a phone call</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Uri number = Uri.parse(<span class="string">"tel:5551234"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">Intent callIntent = <span class="keyword">new</span> Intent(Intent.ACTION_DIAL, number);</span></pre></td></tr></table></figure>

<ul>
<li><strong>View a map</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Uri location = Uri.parse(<span class="string">"geo:0,0?q=1600+Amphitheatre+Parkway,"</span> +<span class="string">"+Mountain+View,+California"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">Intent mapIntent = <span class="keyword">new</span> Intent(Intent.ACTION_VIEW, location);</span></pre></td></tr></table></figure>

<ul>
<li><strong>View a webPage</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Uri webPage = Uri.parse(<span class="string">"http://www.android.com"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">Intent webIntent = <span class="keyword">new</span> Intent(Intent.ACTION_VIEW, webPage);</span></pre></td></tr></table></figure>

<ul>
<li><strong>Send an email with an attachment</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Intent emailIntent = <span class="keyword">new</span> Intent(Intent.ACTION_SEND);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">emailIntent.setType(HTTP.PLAIN_TEXT_TYPE);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">emailIntent.putExtra(Intent.EXTRA_EMAIL, <span class="keyword">new</span> String[] &#123;<span class="string">"yhzhang@sedwt.com.cn"</span>&#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">emailIntent.putExtra(Intent.EXTRA_SUBJECT, <span class="string">"Email Subject"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">emailIntent.putExtra(Intent.EXTRA_TEXT, <span class="string">"Email message text"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(<span class="string">"content://path/to/email/attachment"</span>));</span></pre></td></tr></table></figure>


<ul>
<li><strong>Create a calendar event</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Intent calendarIntent = <span class="keyword">new</span> Intent(Intent.ACTION_INSERT,Events.CONTENT_URI);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">Calendar beginTime = Calendar.getInstance().set(<span class="number">2012</span>, <span class="number">0</span>, <span class="number">19</span>, <span class="number">7</span>, <span class="number">30</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">Calendar endTime = Calendar.getInstance().set(<span class="number">2012</span>, <span class="number">0</span>, <span class="number">19</span>, <span class="number">10</span>, <span class="number">30</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">calendarIntent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">            beginTime.getTimeInMillis);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">calendarIntent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">            endTime.getTimeInMillis);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">calendarIntent.putExtra(Events.TITLE, <span class="string">"Ninja class"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">calendarIntent.putExtra(Events.EVENT_LOCATION, <span class="string">"Secret dojo"</span>);</span></pre></td></tr></table></figure>

<h3 id="1-1-2-Verify-There-is-an-App-to-Receive-the-Intent"><a href="#1-1-2-Verify-There-is-an-App-to-Receive-the-Intent" class="headerlink" title="1.1.2 Verify There is an App to Receive the Intent"></a>1.1.2 Verify There is an App to Receive the Intent</h3><blockquote>
<p>Caution: If you invoke an intent and there is no app available on the<br>device that can handle the intent, your app will crash.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">PackageManager packageManager = getPackageManager();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">List activities = packageManager.queryIntentActivities(intent,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">        PackageManager.MATCH_DEFAULT_ONLY);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">boolean</span> isIntentSafe = activities.size() &gt; <span class="number">0</span>;</span></pre></td></tr></table></figure>

<h3 id="1-1-3-Start-an-Activity-with-the-Intent"><a href="#1-1-3-Start-an-Activity-with-the-Intent" class="headerlink" title="1.1.3 Start an Activity with the Intent"></a>1.1.3 Start an Activity with the Intent</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">startActivity(intent);</span></pre></td></tr></table></figure>

<blockquote>
<p>For Example: Create an intent to view a map</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Uri location = Uri.parse(<span class="string">"geo:0,0?q=1600+Amphitheatre+Parkway,"</span> +</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">        <span class="string">"+Mountain+View,+California"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">Intent mapIntent = <span class="keyword">new</span> Intent(Intent.ACTION_VIEW, location);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">PackageManager packageManager = getPackageManager();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">List activities = packageManager.queryIntentActivities(intent, <span class="number">0</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">boolean</span> isIntentSafe = activities.size() &gt; <span class="number">0</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isIntentSafe) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    startActivity(intent);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h3 id="1-1-4-Show-an-App-Chooser"><a href="#1-1-4-Show-an-App-Chooser" class="headerlink" title="1.1.4 Show an App Chooser"></a>1.1.4 Show an App Chooser</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_SEND);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">String title = getResources().getString(R.string.chooser_title);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">Intent chooser = Intent.createChooser(intent, title);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (intent.resolveActivity(getActivityManager()) != <span class="keyword">null</span>) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    startActivity(chooser);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">Intent intent = getIntent();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">Uri data = intent.getData()</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (intent.getType().indexOf(<span class="string">"image/"</span>) != -<span class="number">1</span>) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> handle intents with image data ...</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (intent.getType.equals(<span class="string">"text/plain"</span>)) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// Handle intents with text data ...</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">Intent result = <span class="keyword">new</span> Intent(<span class="string">"com.example.RESULT_ACTION"</span>,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">        Uri.parse(<span class="string">"content://result_uri"</span>));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">setResult(Activity.RESULT_OK, result);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">finish();</span></pre></td></tr></table></figure>
<h2 id="1-2-Getting-a-Result-from-an-Activity"><a href="#1-2-Getting-a-Result-from-an-Activity" class="headerlink" title="1.2 Getting a Result from an Activity"></a>1.2 Getting a Result from an Activity</h2><h2 id="1-3-Allowing-Other-Apps-to-Start-Your-Activity"><a href="#1-3-Allowing-Other-Apps-to-Start-Your-Activity" class="headerlink" title="1.3 Allowing Other Apps to Start Your Activity"></a>1.3 Allowing Other Apps to Start Your Activity</h2><h1 id="2-Saving-Data"><a href="#2-Saving-Data" class="headerlink" title="2. Saving Data"></a>2. Saving Data</h1><p>Most Android apps need to save data, even if only to save information about the<br>app state during <code>onPause()</code> so the user’s progress is not lost. Most non-trivial<br>apps also need to save user settings, and some apps must manage large amounts of<br>information in files and databases.</p>
<h2 id="2-1-Seving-Key-Value-Sets"><a href="#2-1-Seving-Key-Value-Sets" class="headerlink" title="2.1 Seving Key-Value Sets"></a>2.1 Seving Key-Value Sets</h2><p>If you have a relatively small collection of key-values that you’d like to save,<br>you should use the <code>SharedPreferences</code> APIs</p>
<h3 id="2-1-1-Get-a-Handle-to-a-SharedPreferences"><a href="#2-1-1-Get-a-Handle-to-a-SharedPreferences" class="headerlink" title="2.1.1 Get a Handle to a SharedPreferences"></a>2.1.1 Get a Handle to a SharedPreferences</h3><ul>
<li><code>getSharedPreferences()</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Context context = getActivity();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">SharedPreferences sharedPref = context.getSharedPreferences(getString(R.string.preference_file_key), Context.MODE_PRIVATE);</span></pre></td></tr></table></figure>

<ul>
<li><code>getPreferences()</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">SharedPreferences sharedPref = getActivity().getPreferences(Context.MODE_PRIVATE);</span></pre></td></tr></table></figure>

<blockquote>
<p>Caution: If you create a shared preferences file with<code>MODE_WORLD_READABLE</code><br>or <code>MODE_WORLD_WRITEABLE</code>, then any other apps that know the file identifier<br>can access your data.</p>
</blockquote>
<h3 id="2-1-2-Write-to-Shared-Preferences"><a href="#2-1-2-Write-to-Shared-Preferences" class="headerlink" title="2.1.2 Write to Shared Preferences"></a>2.1.2 Write to Shared Preferences</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">SharedPreferences sharedPref = getActivity().getPreferences(Context.MODE_PRIVATE);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">SharedPreferences.Editor editor = sharedPref.edit();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">editor.putInt(getString(R.string.saved_high_score), newHighScore);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">editor.commit();</span></pre></td></tr></table></figure>

<h3 id="2-1-3-Read-from-Shared-Preferences"><a href="#2-1-3-Read-from-Shared-Preferences" class="headerlink" title="2.1.3 Read from Shared Preferences"></a>2.1.3 Read from Shared Preferences</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">SharedPreferences sharedPref = getActivity().getPreferences(Context.MODE_PRIVATE);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> defaultValue = getResources().getInteger(getString(R.string.saved_high_score_default));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> highScore = sharedPref.getInt(getString(R.string.saved_high_score), defaultValue);</span></pre></td></tr></table></figure>

<h2 id="2-2-保存文件"><a href="#2-2-保存文件" class="headerlink" title="2.2 保存文件"></a>2.2 保存文件</h2><h3 id="2-2-1-选择内部或外部存储"><a href="#2-2-1-选择内部或外部存储" class="headerlink" title="2.2.1 选择内部或外部存储"></a>2.2.1 选择内部或外部存储</h3><h3 id="2-2-2-获取外部存储的权限"><a href="#2-2-2-获取外部存储的权限" class="headerlink" title="2.2.2 获取外部存储的权限"></a>2.2.2 获取外部存储的权限</h3><p>要向外部存储写入信息，您必须在您的清单文件中请求 <code>WRITE_EXTERNAL_STORAGE</code> 权限</p>
<blockquote>
<p>注意：目前所有应用可读取外部存储，而无需特别的权限。但这在将来的版本中回进行更改，所以<br>还需要声明 <code>READ_EXTERNAL_STORAGE</code> 权限。</p>
</blockquote>
<h3 id="2-2-3-将文件保存在内部存储中"><a href="#2-2-3-将文件保存在内部存储中" class="headerlink" title="2.2.3 将文件保存在内部存储中"></a>2.2.3 将文件保存在内部存储中</h3><p>在内部存储中保存文件时，您可以通过调用以下两种方法之一获取作为 <code>File</code> 的相应目录。</p>
<ul>
<li><strong><code>getFilesDir()</code></strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">File file = <span class="keyword">new</span> File(context.getFilesDir(), fileName);</span></pre></td></tr></table></figure>

<ul>
<li><strong><code>getCacheDir()</code></strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> File <span class="title">getTempFile</span><span class="params">(Context context, String url)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    File file;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">try</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">         String fileName = Uri.parse(url).getLastPathSegment();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">           <span class="comment">// 如果需要缓存某些文件，应使用createTempFile()方法。</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">        file = File.createTempFile(fileName, <span class="keyword">null</span>, Context.getCacheDir());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> error while creating file.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">return</span> file;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<ul>
<li><strong><code>openFileOutput()</code></strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">String fileName = <span class="string">"myfile"</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">String string = <span class="string">"Hello World"</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">FileOutputStream outputStream;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    outputStream = openFileOutput(fileName, Context.MODE_PRIVATE);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    outputStream.write(getBytes());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    outputStream.close();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">&#125; <span class="keyword">catch</span>(IOException e) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    e.printStackTrace();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h3 id="2-2-4-将文件保存在外部存储中"><a href="#2-2-4-将文件保存在外部存储中" class="headerlink" title="2.2.4 将文件保存在外部存储中"></a>2.2.4 将文件保存在外部存储中</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Checks if external storage is available for read and write. */</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isExternalStorageWritable</span><span class="params">()</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    String state = Environment.getExternalStorageState();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span> (Environment.MEDIA_MOUNTED.equals(state) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">return</span> ture;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Checks if external storage is available to at least read */</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isExternalStorageReadable</span><span class="params">()</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    String state = Environment.getExternalStorageState();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span> (Environment.MEDIA_MOUNTED.equals(state) ||</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">        Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">    </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p>如果您要将公共文件保存在外部存储设备上，请使用<code>getExternalStoragePublicDirectory()</code><br>方法获取表示外部存储设备上相应目录的 File。该方法使用指定您想要保存以便它们可以与其他公<br>共文件在逻辑上组织在一起的文件类型的参数，比如<code>DIRECTORY_MUSIC</code>或<code>DIRECTORY_PICTURES</code>。<br>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> File <span class="title">getAlbumStorageDir</span><span class="params">(String albumName)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// Get the directory for the user's public pictures directory.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    File file = <span class="keyword">new</span> File(Environment.getExternalStoragePublicDirectory(</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">            Environment.DIRECTORY_PICTURES), albumName);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span> (!file.mkdirs()) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">        Log.e(LOG_TAG, <span class="string">"Directory not created"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">return</span> file;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p>如果您要保存您的应用专用文件，您可以通过调用<code>getExternalFilesDir()</code>并向其传递指示您<br>想要的目录类型的名称，从而获取相应的目录。通过这种方法创建的各个目录将添加至封装您的应用的<br>所有外部存储文件的父目录，当用户卸载您的应用时，系统会删除这些文件。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> File <span class="title">getAlbumStorageDir</span><span class="params">(Context context, String albumName)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// Get the directory for the app's private pictures directory.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    File file = <span class="keyword">new</span> File(context.getExternalFilesDir(</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">            Environment.DIRECTORY_PICTURES), albumName);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span> (!file.mkdirs()) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">        Log.e(LOG_TAG, <span class="string">"Directory not created"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">return</span> file;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p>如果没有适合您文件的预定义子目录名称，您可以改为调用<code>getExternalFilesDir()</code>并传递<br>null。这将返回外部存储上您的应用的专用目录的根目录。</p>
<h3 id="2-2-5-查询可用空间"><a href="#2-2-5-查询可用空间" class="headerlink" title="2.2.5 查询可用空间"></a>2.2.5 查询可用空间</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">getFreeSpace();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">getTotalSpace();</span></pre></td></tr></table></figure>

<blockquote>
<p>注：保存您的文件之前，您无需检查可用空间量。您可以尝试立刻写入文件，然后在 IOException<br> 出现时将其捕获。 如果您不知道所需的确切空间量，您可能需要这样做。 例如，如果在保存文件之<br> 前通过将 PNG 图像转换成 JPEG 更改了文件的编码，您事先将不知道文件的大小。</p>
</blockquote>
<h3 id="2-2-6-删除文件"><a href="#2-2-6-删除文件" class="headerlink" title="2.2.6 删除文件"></a>2.2.6 删除文件</h3><p>您应始终删除不再需要的文件。删除文件最直接的方法是让打开的文件参考自行调用 delete()。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">myFile.delete();</span></pre></td></tr></table></figure>

<p>如果文件保存在内部存储中，您还可以请求 Context 通过调用 deleteFile() 来定位和删除文件：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">myContext.deleteFile(fileName);</span></pre></td></tr></table></figure>

<blockquote>
<p>注：当用户卸载您的应用时，Android 系统会删除以下各项：</p>
</blockquote>
<ul>
<li>您保存在内部存储中的所有文件</li>
<li>您使用 getExternalFilesDir() 保存在外部存储中的所有文件。</li>
<li>但是，您应手动删除使用 getCacheDir() 定期创建的所有缓存文件并且定期删除不再需要的其他文件。</li>
</ul>
<h2 id="2-3-在SQL数据库中保存数据"><a href="#2-3-在SQL数据库中保存数据" class="headerlink" title="2.3 在SQL数据库中保存数据"></a>2.3 在SQL数据库中保存数据</h2><h3 id="2-3-1-定义架构和契约"><a href="#2-3-1-定义架构和契约" class="headerlink" title="2.3.1 定义架构和契约"></a>2.3.1 定义架构和契约</h3><p>例如，该代码段定义了单个表格的表格名称和列名称：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">FeedReaderContract</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// To prevent someone from accidentally instantiating the contract class,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// make the constructor private.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">FeedReaderContract</span><span class="params">()</span> </span>&#123;&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">/* Inner class that defines the table contents */</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">FeedEntry</span> <span class="keyword">implements</span> <span class="title">BaseColumns</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TABLE_NAME = <span class="string">"entry"</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String COLUMN_NAME_TITLE = <span class="string">"title"</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String COLUMN_NAME_SUBTITLE = <span class="string">"subtitle"</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<h3 id="2-3-2-使用SQL辅助工具创建数据库"><a href="#2-3-2-使用SQL辅助工具创建数据库" class="headerlink" title="2.3.2 使用SQL辅助工具创建数据库"></a>2.3.2 使用SQL辅助工具创建数据库</h3><p>在您定义了数据库的外观后，您应实现创建和维护数据库和表格的方法。 这里有一些典型的表格创建和删除语句：</p>
<pre><code>private static final String TEXT_TYPE = &quot; TEXT&quot;;
private static final String COMMA_SEP = &quot;,&quot;;
private static final String SQL_CREATE_ENTRIES =
    &quot;CREATE TABLE &quot; + FeedEntry.TABLE_NAME + &quot; (&quot; +
    FeedEntry._ID + &quot; INTEGER PRIMARY KEY,&quot; +
    FeedEntry.COLUMN_NAME_TITLE + TEXT_TYPE + COMMA_SEP +
    FeedEntry.COLUMN_NAME_SUBTITLE + TEXT_TYPE + &quot;)&quot;;
private static final String SQL_DELETE_ENTRIES =
    &quot;DROP TABLE IF EXISTS&quot; + FeedEntry.TABLE_NAME;</code></pre><p><code>SQLiteOpenHelper</code> 类中有一组有用的 API。当您使用此类获取对您数据库的引用时，系统将只在<br>需要之时而不是应用启动过程中执行可能长期运行的操作：创建和更新数据库。 您仅需调用<br><code>getWritableDatabase()</code> 或 <code>getReadableDatabase()</code> 即可。</p>
<blockquote>
<p>注：由于它们可能长期运行，因此请确保您在后台线程中调用 <code>getWritableDatabase()</code> 或<br><code>getReadableDatabase()</code>，比如使用 <code>AsyncTask</code> 或 <code>IntentService</code>。</p>
</blockquote>
<p>要使用 <code>SQLiteOpenHelper</code>，请创建一个替换 <code>onCreate()</code>、<code>onUpgrade()</code> 和<code>onOpen()</code><br>回调方法的子类。您可能还希望实现 <code>onDowngrade()</code>，但这并非必需操作。</p>
<p>例如，下面是一个使用如上所示一些命令的 <code>SQLiteOpenHelper</code> 的实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FeedReaderDbHelper</span> <span class="keyword">extends</span> <span class="title">SQLiteOpenHelper</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// If you change the database schema, you must increment the database version.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DATABASE_VERSION = <span class="number">1</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DATABASE_NAME = <span class="string">"FeedReader.db"</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FeedReaderDbHelper</span><span class="params">(Context context)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">super</span>(context, DATABASE_NAME, <span class="keyword">null</span>, DATABASE_VERSION);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(SQLiteDatabase db)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">        db.execSQL(SQL_CREATE_ENTRIES);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onUpgrade</span><span class="params">(SQLiteDatabase db, <span class="keyword">int</span> oldVersion, <span class="keyword">int</span> newVersion)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">        <span class="comment">// This database is only a cache for online data, so its upgrade policy is</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">        <span class="comment">// to simply to discard the data and start over</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">        db.execSQL(SQL_DELETE_ENTRIES);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">        onCreate(db);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDowngrade</span><span class="params">(SQLiteDatabase db, <span class="keyword">int</span> oldVersion, <span class="keyword">int</span> newVersion)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">        onUpgrade(db, oldVersion, newVersion);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p>要访问您的数据库，请实例化 SQLiteOpenHelper 的子类：</p>
<pre><code>FeedReaderDbHelper mDbHelper = new FeedReaderDbHelper(getContext());</code></pre><h3 id="2-3-3-将信息输入到数据库"><a href="#2-3-3-将信息输入到数据库" class="headerlink" title="2.3.3 将信息输入到数据库"></a>2.3.3 将信息输入到数据库</h3><p>通过将一个<code>ContentValues</code>对象传递至<code>insert()</code>方法将数据插入数据库：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// Gets the data repository in write mode</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">SQLiteOpenHelper db = mDbHelper.getWritableDatabase();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create a new map of values, where column names are the keys</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">ContentValues values = <span class="keyword">new</span> ContentValues();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">values.put(FeedEntry.COLUMN_NAME_TITLE, title);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">values.put(FeedEntry.COLUMN_NAME_SUBTITLE, subtitle);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// Insert the new row, returning the primary key value of the new row</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> newRowId = db.insert(FeedReader.DATABASE_NAME, <span class="keyword">null</span>, values);</span></pre></td></tr></table></figure>

<h3 id="2-3-4-从数据库读取信息"><a href="#2-3-4-从数据库读取信息" class="headerlink" title="2.3.4 从数据库读取信息"></a>2.3.4 从数据库读取信息</h3><p>要从数据库中读取信息，请使用<code>query()</code>方法，将其传递至选择条件和所需列。该方法结合<code>insert()</code><br>和<code>update()</code>的元素，除非列列表定义了您希望获取的数据，而不是希望插入的数据。查询的结果将在<br><code>Cursor</code>对象中返回给您。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">SQLiteDatabase db = SQLiteOpenHelper.getReadableDatabase();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// Define a projection that specifies which columns from the database</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// you will actually use after this query.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">String[] projection = &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    FeedEntry._ID,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    FeedEntry.COLUMN_NAME_TITLE,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    FeedEntry.COLUMN_NAME_SUBTITLE</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">&#125;;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// Filter results WHERE "title" = 'My Title'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">String selection = FeedEntry.COLUMN_NAME_TITLE + <span class="string">" = ?"</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">String selectionArgs = &#123;<span class="string">"My Title"</span>&#125;;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// How you want the results sorted in the resulting Cursor</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">String sortOrder =</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">    FeedEntry.COLUMN_NAME_SUBTITLE + <span class="string">" DESC"</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">Cursor c = db.query(</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">    FeedEntry.TABLE_NAME,     <span class="comment">// The table to query.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">    projection,               <span class="comment">// The columns to return.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">    selection,                <span class="comment">// The columns for the WHERE clause.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">    selectionArgs,            <span class="comment">// The value for the WHERE clause.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">null</span>,                     <span class="comment">// don't group the rows.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">null</span>,                     <span class="comment">// don't filter by row groups.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">    sortOrder                 <span class="comment">// The sort order.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">);</span></pre></td></tr></table></figure>

<p>要查看游标中的某一行，请使用<code>Cursor</code>移动方法之一，您必须在开始读取值之前始终调用这些方法。一般<br>情况下，您应通过调用<code>moveToFirst()</code>开始，其将“读取位置”置于结果中的第一个条目中。 对于每一行，<br>您可以通过调用<code>Cursor</code>获取方法之一读取列的值，比如<code>getString()</code>或<code>getLong()</code>。对于每种获取<br>方法，您必须传递所需列的索引位置，您可以通过调用<code>getColumnIndex()</code>或<code>getColumnIndexOrThrow()</code><br>获取。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">cursor.moveToFirst();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> itemId = cursor.getLong(cursor.getColumnIndexOrThrow(FeedEntry._ID));</span></pre></td></tr></table></figure>

<h3 id="2-3-5-从数据库删除信息"><a href="#2-3-5-从数据库删除信息" class="headerlink" title="2.3.5 从数据库删除信息"></a>2.3.5 从数据库删除信息</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// Define 'where' part of query.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">String selection = FeedEntry.COLUMN_NAME_TITLE + <span class="string">" LIKE ?"</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// Specify arguments in placeholder order.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">String[] selectionArgs = &#123; <span class="string">"MyTitle"</span> &#125;;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// Issue SQL statement.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">db.delete(FeedEntry.TABLE_NAME, selection, selectionArgs);</span></pre></td></tr></table></figure>

<h3 id="2-3-6-更新数据库"><a href="#2-3-6-更新数据库" class="headerlink" title="2.3.6 更新数据库"></a>2.3.6 更新数据库</h3><p>当您需要修改数据库值的子集时，请使用<code>update()</code>方法。更新表可将<code>insert()</code>的内容值语法与<code>delete()</code><br>的where语法相结合。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">SQLiteDatabase db = mDbHelper.getReadableDatabase();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// New value for one column</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">ContentValues values = <span class="keyword">new</span> ContentValues();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">values.put(FeedEntry.COLUMN_NAME_TITLE, title);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// Which row to update, based on the title</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">String selection = FeedEntry.COLUMN_NAME_TITLE + <span class="string">" LIKE ?"</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">String[] selectionArgs = &#123; <span class="string">"MyTitle"</span> &#125;;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> count = db.update(</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    FeedReaderDbHelper.FeedEntry.TABLE_NAME,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">    values,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    selection,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">    selectionArgs);</span></pre></td></tr></table></figure>

<h1 id="3-Working-with-System-Permissions"><a href="#3-Working-with-System-Permissions" class="headerlink" title="3. Working with System Permissions"></a>3. Working with System Permissions</h1><h2 id="3-1-声明权限"><a href="#3-1-声明权限" class="headerlink" title="3.1 声明权限"></a>3.1 声明权限</h2><h2 id="3-2-在运行时请求权限"><a href="#3-2-在运行时请求权限" class="headerlink" title="3.2 在运行时请求权限"></a>3.2 在运行时请求权限</h2><h3 id="3-2-1-检查权限"><a href="#3-2-1-检查权限" class="headerlink" title="3.2.1 检查权限"></a>3.2.1 检查权限</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 具有此权限则返回`PackageManager.PERMISSION_GRANTED`,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 否则返回`PackageManager.PERMISSION_DENIED`;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> permissionCheck = ContextCompat.checkSelfPermission(thisActivity,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    Manifest.permission.WRITE_CALENDAR);</span></pre></td></tr></table></figure>

<h3 id="3-2-2-请求权限"><a href="#3-2-2-请求权限" class="headerlink" title="3.2.2 请求权限"></a>3.2.2 请求权限</h3><h4 id="解释需要权限的原因"><a href="#解释需要权限的原因" class="headerlink" title="解释需要权限的原因"></a><strong>解释需要权限的原因</strong></h4><pre><code>shouldShowRequestPermissionRationale();</code></pre><h4 id="请求所需的权限"><a href="#请求所需的权限" class="headerlink" title="请求所需的权限"></a><strong>请求所需的权限</strong></h4><pre><code>requestPermissions();</code></pre><blockquote>
<p>以下代码可以检查应用是否具备读取用户联系人的权限，并根据需要请求该权限：</p>
</blockquote>
<pre><code>if (ContextCompat.checkSelfPermission(
    thisActivity, Manifest.permission.READ_CONTACTS)
    != PackageManager.PERMISSION_GRANTED) {
    if (ActivityCompat.shouldShowRequestPermissionRationale(thisActivity,
        Manifest.permission.READ_CONTACTS)) {
        // show an explaination to the user
    } else {
        ActivityCompat.requestPermissions(thisActivity, new String[] {
            Manifest.permission.READ_CONTACTS },
                    MY_PERMISSIONS_REQUEST_READ_CONTACTS);

        // MY_PERMISSIONS_REQUEST_READ_CONTACTS is an
        // app-defined int constant. The callback method gets the
        // result of the request.
    }
}</code></pre><h4 id="处理响应请求"><a href="#处理响应请求" class="headerlink" title="处理响应请求"></a><strong>处理响应请求</strong></h4><p>当应用请求权限时，系统将向用户显示一个对话框。当用户响应时，系统将调用应用的<br><code>onRequestPermissionsResult()</code>方法，向其传递用户响应。您的应用必须替换该方法，以<br>了解是否已获得相应权限。回调会将您传递的相同请求代码传递给 <code>requestPermissions()</code>。<br>例如，如果应用请求 READ_CONTACTS 访问权限，则它可能采用以下回调方法：</p>
<pre><code>@Override
public void onRequestPermissionsResult(int requestCode,
    String permissions[], int[] grantResults) {
    switch (requestCode) {
        case MY_PERMISSIONS_REQUEST_READ_CONTACTS: {
            // If request is cancelled, the result arrays are empty.
            if (grantResults.length &gt; 0
                &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {

                // permission was granted, yay! Do the
                // contacts-related task you need to do.

            } else {

                // permission denied, boo! Disable the
                // functionality that depends on this permission.
            }
            return;
        }

        // other &apos;case&apos; lines to check for other
        // permissions this app might request
    }
}</code></pre><h2 id="3-3-权限最佳做法"><a href="#3-3-权限最佳做法" class="headerlink" title="3.3 权限最佳做法"></a>3.3 权限最佳做法</h2><h3 id="3-3-1-考虑使用intent"><a href="#3-3-1-考虑使用intent" class="headerlink" title="3.3.1 考虑使用intent"></a>3.3.1 考虑使用intent</h3><h3 id="3-3-2-仅要求您需要的权限"><a href="#3-3-2-仅要求您需要的权限" class="headerlink" title="3.3.2 仅要求您需要的权限"></a>3.3.2 仅要求您需要的权限</h3><h3 id="3-3-3-不要让用户感到无所适从"><a href="#3-3-3-不要让用户感到无所适从" class="headerlink" title="3.3.3 不要让用户感到无所适从"></a>3.3.3 不要让用户感到无所适从</h3><h3 id="3-3-4-解释需要权限的原因"><a href="#3-3-4-解释需要权限的原因" class="headerlink" title="3.3.4 解释需要权限的原因"></a>3.3.4 解释需要权限的原因</h3><h3 id="3-3-5-测试两种权限模式"><a href="#3-3-5-测试两种权限模式" class="headerlink" title="3.3.5 测试两种权限模式"></a>3.3.5 测试两种权限模式</h3>
    </div>

    
    
    

      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/Android/" rel="tag"><i class="fa fa-tag"></i> Android</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
                <a href="/2015/10/16/HelloWorld/" rel="next" title="Hello My Blogs！">
                  <i class="fa fa-chevron-left"></i> Hello My Blogs！
                </a>
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
            </div>
          </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-Interacting-with-Other-Apps"><span class="nav-number">1.</span> <span class="nav-text">1. Interacting with Other Apps</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-Sending-the-User-to-Another-App"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 Sending the User to Another App</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-1-Build-an-Implicit-Intent"><span class="nav-number">1.1.1.</span> <span class="nav-text">1.1.1 Build an Implicit Intent</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-2-Verify-There-is-an-App-to-Receive-the-Intent"><span class="nav-number">1.1.2.</span> <span class="nav-text">1.1.2 Verify There is an App to Receive the Intent</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-3-Start-an-Activity-with-the-Intent"><span class="nav-number">1.1.3.</span> <span class="nav-text">1.1.3 Start an Activity with the Intent</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-4-Show-an-App-Chooser"><span class="nav-number">1.1.4.</span> <span class="nav-text">1.1.4 Show an App Chooser</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-Getting-a-Result-from-an-Activity"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 Getting a Result from an Activity</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-Allowing-Other-Apps-to-Start-Your-Activity"><span class="nav-number">1.3.</span> <span class="nav-text">1.3 Allowing Other Apps to Start Your Activity</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-Saving-Data"><span class="nav-number">2.</span> <span class="nav-text">2. Saving Data</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-Seving-Key-Value-Sets"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 Seving Key-Value Sets</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-1-Get-a-Handle-to-a-SharedPreferences"><span class="nav-number">2.1.1.</span> <span class="nav-text">2.1.1 Get a Handle to a SharedPreferences</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-2-Write-to-Shared-Preferences"><span class="nav-number">2.1.2.</span> <span class="nav-text">2.1.2 Write to Shared Preferences</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-3-Read-from-Shared-Preferences"><span class="nav-number">2.1.3.</span> <span class="nav-text">2.1.3 Read from Shared Preferences</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-保存文件"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 保存文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-1-选择内部或外部存储"><span class="nav-number">2.2.1.</span> <span class="nav-text">2.2.1 选择内部或外部存储</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-2-获取外部存储的权限"><span class="nav-number">2.2.2.</span> <span class="nav-text">2.2.2 获取外部存储的权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-3-将文件保存在内部存储中"><span class="nav-number">2.2.3.</span> <span class="nav-text">2.2.3 将文件保存在内部存储中</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-4-将文件保存在外部存储中"><span class="nav-number">2.2.4.</span> <span class="nav-text">2.2.4 将文件保存在外部存储中</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-5-查询可用空间"><span class="nav-number">2.2.5.</span> <span class="nav-text">2.2.5 查询可用空间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-6-删除文件"><span class="nav-number">2.2.6.</span> <span class="nav-text">2.2.6 删除文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-在SQL数据库中保存数据"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 在SQL数据库中保存数据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-1-定义架构和契约"><span class="nav-number">2.3.1.</span> <span class="nav-text">2.3.1 定义架构和契约</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-2-使用SQL辅助工具创建数据库"><span class="nav-number">2.3.2.</span> <span class="nav-text">2.3.2 使用SQL辅助工具创建数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-3-将信息输入到数据库"><span class="nav-number">2.3.3.</span> <span class="nav-text">2.3.3 将信息输入到数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-4-从数据库读取信息"><span class="nav-number">2.3.4.</span> <span class="nav-text">2.3.4 从数据库读取信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-5-从数据库删除信息"><span class="nav-number">2.3.5.</span> <span class="nav-text">2.3.5 从数据库删除信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-6-更新数据库"><span class="nav-number">2.3.6.</span> <span class="nav-text">2.3.6 更新数据库</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-Working-with-System-Permissions"><span class="nav-number">3.</span> <span class="nav-text">3. Working with System Permissions</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-声明权限"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 声明权限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-在运行时请求权限"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 在运行时请求权限</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-1-检查权限"><span class="nav-number">3.2.1.</span> <span class="nav-text">3.2.1 检查权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-2-请求权限"><span class="nav-number">3.2.2.</span> <span class="nav-text">3.2.2 请求权限</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#解释需要权限的原因"><span class="nav-number">3.2.2.1.</span> <span class="nav-text">解释需要权限的原因</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#请求所需的权限"><span class="nav-number">3.2.2.2.</span> <span class="nav-text">请求所需的权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#处理响应请求"><span class="nav-number">3.2.2.3.</span> <span class="nav-text">处理响应请求</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-权限最佳做法"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 权限最佳做法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-1-考虑使用intent"><span class="nav-number">3.3.1.</span> <span class="nav-text">3.3.1 考虑使用intent</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-2-仅要求您需要的权限"><span class="nav-number">3.3.2.</span> <span class="nav-text">3.3.2 仅要求您需要的权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-3-不要让用户感到无所适从"><span class="nav-number">3.3.3.</span> <span class="nav-text">3.3.3 不要让用户感到无所适从</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-4-解释需要权限的原因"><span class="nav-number">3.3.4.</span> <span class="nav-text">3.3.4 解释需要权限的原因</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-5-测试两种权限模式"><span class="nav-number">3.3.5.</span> <span class="nav-text">3.3.5 测试两种权限模式</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="Yohann Zhang"
    src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Yohann Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">2</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yohann Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.5.0
  </div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  
















  

  

</body>
</html>
